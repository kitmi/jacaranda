{"version":3,"sources":["../../../src/lang/entityFeatures/createTimestamp.js"],"sourcesContent":["\"use strict\";\n\nconst FEATURE_NAME = 'createTimestamp';\n\n/**\n * A rule specifies the entity to automatically record the creation time\n * @module EntityFeature_CreateTimestamp\n */\n\n/**\n * Initialize the feature\n * @param {Entity} entity - Entity to apply this feature\n * @param {array} options - Field options\n */\nfunction feature(entity, args = []) {\n    let typeInfo = {\n        name: 'createdAt',\n        type: 'datetime',\n        auto: true,\n        readOnly: true,\n        writeOnce: true\n    };\n\n    let [ options ] = args;\n\n    if (options) {\n        if (typeof options === 'string') {\n            options = { name: options };\n        }\n\n        Object.assign(typeInfo, options);\n    }\n\n    let fieldName = typeInfo.name;\n\n    entity.addFeature(FEATURE_NAME, {\n        field: fieldName\n    }).once('afterAddingFields', () => {\n        entity.addField(fieldName, typeInfo);\n    });\n}\n\nmodule.exports = feature;"],"names":["FEATURE_NAME","feature","entity","args","typeInfo","name","type","auto","readOnly","writeOnce","options","Object","assign","fieldName","addFeature","field","once","addField","module","exports"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA;AAEA,MAAMA,eAAe;AAErB;;;CAGC,GAED;;;;CAIC,GACD,SAASC,QAAQC,MAAM,EAAEC,OAAO,EAAE;IAC9B,IAAIC,WAAW;QACXC,MAAM;QACNC,MAAM;QACNC,MAAM;QACNC,UAAU;QACVC,WAAW;IACf;IAEA,IAAI,CAAEC,QAAS,GAAGP;IAElB,IAAIO,SAAS;QACT,IAAI,OAAOA,YAAY,UAAU;YAC7BA,UAAU;gBAAEL,MAAMK;YAAQ;QAC9B;QAEAC,OAAOC,MAAM,CAACR,UAAUM;IAC5B;IAEA,IAAIG,YAAYT,SAASC,IAAI;IAE7BH,OAAOY,UAAU,CAACd,cAAc;QAC5Be,OAAOF;IACX,GAAGG,IAAI,CAAC,qBAAqB;QACzBd,OAAOe,QAAQ,CAACJ,WAAWT;IAC/B;AACJ;AAEAc,OAAOC,OAAO,GAAGlB"}