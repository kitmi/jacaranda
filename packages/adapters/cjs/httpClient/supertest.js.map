{"version":3,"sources":["../../src/httpClient/supertest.js"],"sourcesContent":["const { URL } = require('node:url');\n\nconst supertestAdapter = (supertest) => {\n    const agentWrapper = {\n        createRequest(httpMethod, url) {\n            let testUrl = url;\n\n            if (url.startsWith('http://') || url.startsWith('https://')) {\n                const urlObj = new URL(url);\n\n                testUrl = urlObj.pathname;\n                if (urlObj.hash) {\n                    testUrl += '#' + urlObj.hash;\n                }\n            }\n\n            if (!agentWrapper.server) {\n                throw new Error('\"server\" of the agent is required before sending test request.');\n            }\n\n            return supertest(agentWrapper.server)[httpMethod](testUrl);\n        },\n    };\n\n    return agentWrapper;\n};\n\nexport default supertestAdapter;\n"],"names":["URL","require","supertestAdapter","supertest","agentWrapper","createRequest","httpMethod","url","testUrl","startsWith","urlObj","pathname","hash","server","Error"],"mappings":";;;;+BA2BA;;;eAAA;;;AA3BA,MAAM,EAAEA,GAAG,EAAE,GAAGC,QAAQ;AAExB,MAAMC,mBAAmB,CAACC;IACtB,MAAMC,eAAe;QACjBC,eAAcC,UAAU,EAAEC,GAAG;YACzB,IAAIC,UAAUD;YAEd,IAAIA,IAAIE,UAAU,CAAC,cAAcF,IAAIE,UAAU,CAAC,aAAa;gBACzD,MAAMC,SAAS,IAAIV,IAAIO;gBAEvBC,UAAUE,OAAOC,QAAQ;gBACzB,IAAID,OAAOE,IAAI,EAAE;oBACbJ,WAAW,MAAME,OAAOE,IAAI;gBAChC;YACJ;YAEA,IAAI,CAACR,aAAaS,MAAM,EAAE;gBACtB,MAAM,IAAIC,MAAM;YACpB;YAEA,OAAOX,UAAUC,aAAaS,MAAM,CAAC,CAACP,WAAW,CAACE;QACtD;IACJ;IAEA,OAAOJ;AACX;MAEA,WAAeF"}