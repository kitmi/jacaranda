<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="JSV.html">JSV</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="JSV.html#match">match</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#applyBinaryOperator">applyBinaryOperator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#applyOperator">applyOperator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#applyUnaryOperator">applyUnaryOperator</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#test">test</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#transform">transform</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#transformCollection">transformCollection</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#validate">validate</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>@kitmi/jsonv</h1>
<h2>JSON Validation (JSV) Syntax</h2>
<p>The JSON Validation Syntax is a specification for validating JSON-like data structures. It allows users to define validation rules using a JSON-like syntax and provides mechanisms to validate data against these rules. This document outlines the syntax rules used for validation within the JSV framework.</p>
<h2>Installation</h2>
<p>To install <code>@kitmi/jsonv</code>, run the following command:</p>
<pre class="prettyprint source lang-bash"><code>bun install @kitmi/jsonv
</code></pre>
<p>Or if you're using npm:</p>
<pre class="prettyprint source lang-bash"><code>npm install @kitmi/jsonv
</code></pre>
<h2>Syntax Rules</h2>
<h3>Basic Validation</h3>
<ul>
<li><strong>Equality (<code>$eq</code> or <code>$equal</code>)</strong>: Checks if the value is equal to the specified value.</li>
<li><strong>Inequality (<code>$ne</code> or <code>$neq</code> or <code>$notEqual</code>)</strong>: Checks if the value is not equal to the specified value.</li>
<li><strong>Greater Than (<code>$gt</code> or <code>$greaterThan</code>)</strong>: Checks if the value is greater than the specified value.</li>
<li><strong>Greater Than or Equal (<code>$gte</code> or <code>$greaterThanOrEqual</code> or <code>$min</code>)</strong>: Checks if the value is greater than or equal to the specified value.</li>
<li><strong>Less Than (<code>$lt</code> or <code>$lessThan</code>)</strong>: Checks if the value is less than the specified value.</li>
<li><strong>Less Than or Equal (<code>$lte</code> or <code>$lessThanOrEqual</code> or <code>$max</code>)</strong>: Checks if the value is less than or equal to the specified value.</li>
<li><strong>Exists (<code>$exists</code>)</strong>: Checks if the value exists (is not null or undefined).</li>
<li><strong>Required (<code>$required</code>)</strong>: Checks if the value is present and not null or undefined.</li>
</ul>
<h3>Advanced Validation</h3>
<ul>
<li><strong>Match (<code>$match</code>)</strong>: Validates the value against all specified validation rules.</li>
<li><strong>Match Any (<code>$any</code> or <code>$or</code> or <code>$either</code>)</strong>: Validates the value against any of the specified validation rules.</li>
<li><strong>All Match (<code>$allMatch</code> or <code>|&gt;$all</code> or <code>|&gt;$match</code>)</strong>: Checks if all elements in an array satisfy the specified validation rule.</li>
<li><strong>Any One Match (<code>$anyOneMatch</code> or <code>|*$any</code> or <code>|*$match</code> or <code>|*$either</code>)</strong>: Checks if at least one element in an array satisfies the specified validation rule.</li>
<li><strong>Type (<code>$typeOf</code>)</strong>: Checks if the value is of the specified type.</li>
<li><strong>Has Keys (<code>$hasKey</code> or <code>$hasKeys</code>)</strong>: Checks if the object has all the specified keys.</li>
<li><strong>Start With (<code>$startWith</code> or <code>$startsWith</code>)</strong>: Checks if the string value starts with the specified substring.</li>
<li><strong>End With (<code>$endWith</code> or <code>$endsWith</code>)</strong>: Checks if the string value ends with the specified substring.</li>
<li><strong>Match Pattern (<code>$pattern</code> or <code>$matchPattern</code> or <code>$matchRegex</code>)</strong>: Checks if the string value matches the specified regular expression pattern.</li>
<li><strong>Contains (<code>$contain</code> or <code>$contains</code>)</strong>: Checks if the string value contains the specified substring.</li>
<li><strong>Same As (<code>$sameAs</code>)</strong>: Checks if the value is the same as the value of the specified field in the parent object.</li>
</ul>
<h3>Use Expression as Operand</h3>
<p>Use { $expr:  } to wrap the value as a JSX expression</p>
<pre class="prettyprint source lang-json"><code>{
    $if: [
        { $expr: [
            '$parent.type', 
            { $match: { $eq: 'array' } } 
        ] }, // use an expression as condition
        [ // then
            { $required: true }, [{ type: { $in: ['text', 'integer'] } }]
        ],
        // else
    ],
}
</code></pre>
<h3>Special Cases</h3>
<ul>
<li><strong>Validation with <code>null</code></strong>: Invoking <code>Jsv.match(value, null)</code> will always return <code>true</code>. It means the jsv is null, nothing to validate. To explicitly match <code>null</code>, use <code>{ $exist: false }</code>.</li>
<li><strong>Validation with Array</strong>: Using <code>Jsv.match(value, [ ... ])</code> will validate the value against all JSV objects in the array. To check for equality with an array, use <code>{ $eq: [ ... ] }</code>. To check whether the value matches one of the element in the array, use <code>{ $in: [ ... ] }</code>.</li>
</ul>
<h3>Context Variables</h3>
<ul>
<li><strong><code>$root</code></strong>: Represents the root value being validated.</li>
<li><strong><code>$this</code></strong>: Represents the current value being validated.</li>
<li><strong><code>$parent</code></strong>: Represents the parent object of the current value being validated.</li>
<li><strong><code>$key</code></strong>: Represents the current key being validated.</li>
</ul>
<h3>Validation Options</h3>
<ul>
<li><strong><code>throwError</code></strong>: If set to <code>true</code>, throws an error when validation fails.</li>
<li><strong><code>abortEarly</code></strong>: If set to <code>true</code>, stops validation on the first failure.</li>
<li><strong><code>plainError</code></strong>: If set to <code>true</code>, returns a plain error message instead of an error object.</li>
<li><strong><code>asPredicate</code></strong>: If set to <code>true</code>, returns a boolean result instead of throwing an error or returning an error message.</li>
</ul>
<h2>Usage Examples</h2>
<pre class="prettyprint source lang-js"><code>import Jsv from '@kitmi/jsonv/bundle'; // bundled with multi-lang messages

// Validate that 'key1' is greater than 1000
Jsv.match(obj, { key1: { $gt: 1000 } });

// Validate that 'key4' does not exist
Jsv.match(obj, { key4: { $exists: false } });

// Validate that 'key8' has all specified keys: 'name', 'type'
Jsv.match(obj, { key8: { $hasKeys: [ 'name', 'type' ] } });
</code></pre>
<p>Specific locale only</p>
<pre class="prettyprint source lang-js"><code>import Jsv from '@kitmi/jsonv';
import En from '@kitmi/jsonv/locale/en';

Jsv.config.loadMessages('en-US', En).setLocale('en-US');

Jsv.match(...);
</code></pre>
<p>Note that the JSV framework is designed to be extensible and can be customized with additional validation rules and operators as needed. The syntax rules outlined in this document represent the core set of validation capabilities provided by the JSV framework.</p>
<h2>License</h2>
<ul>
<li>MIT</li>
<li>Copyright (c) 2023 KITMI PTY LTD</li>
</ul></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.3</a> on Tue Jun 11 2024 10:01:06 GMT+1000 (Australian Eastern Standard Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>