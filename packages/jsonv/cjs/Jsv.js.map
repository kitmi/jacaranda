{"version":3,"sources":["../src/Jsv.js"],"sourcesContent":["import defaultConfig, { Config } from './config';\nimport validate from './validate';\nimport loadValidators from './validatorsLoader';\nimport loadTransformers from './transformersLoader';\n\nexport function createJSV(_config) {\n    if (_config == null) {\n        _config = new Config();\n\n        loadValidators(_config);\n        loadTransformers(_config);\n    }\n\n    /**\n     * JSON Validation Syntax\n     * @class\n     */\n    class JSV {\n        static get config() {\n            return _config;\n        } \n\n        static match(value, jsv, options, context) {\n            const reason = validate(\n                value,\n                jsv,\n                {\n                    throwError: false,\n                    abortEarly: true,\n                    plainError: true,\n                    ...options,\n                },\n                { config: this.config, ...context }\n            );\n            if (reason === true) {\n                return [true];\n            }\n\n            return [false, reason];\n        }\n\n        /**\n         * @param {object} value\n         */\n        constructor(value) {\n            this.value = value;\n        }\n\n        /**\n         * Match the value with expected conditions in JSON expression\n         * @param {object} expected - JSON match expression\n         * @throws ValidationError\n         * @returns {JSV}\n         */\n        match(expected) {\n            validate(this.value, expected, { throwError: true, abortEarly: true }, { config: this.constructor.config });\n            return this;\n        }\n    }\n\n    return JSV;\n}\n\nloadValidators(defaultConfig);\nloadTransformers(defaultConfig);\n\nconst defaultJSV = createJSV(defaultConfig);\n\nexport default defaultJSV;\n"],"names":["createJSV","_config","Config","loadValidators","loadTransformers","JSV","config","match","value","jsv","options","context","reason","validate","throwError","abortEarly","plainError","expected","constructor","defaultConfig","defaultJSV"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAKgBA,SAAS;eAATA;;IA+DhB,OAA0B;eAA1B;;;gEApEsC;iEACjB;yEACM;2EACE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEtB,SAASA,UAAUC,QAAO;IAC7B,IAAIA,YAAW,MAAM;QACjBA,WAAU,IAAIC,cAAM;QAEpBC,IAAAA,yBAAc,EAACF;QACfG,IAAAA,2BAAgB,EAACH;IACrB;IAEA;;;KAGC,GACD,MAAMI;QACF,WAAWC,SAAS;YAChB,OAAOL;QACX;QAEA,OAAOM,MAAMC,KAAK,EAAEC,GAAG,EAAEC,OAAO,EAAEC,OAAO,EAAE;YACvC,MAAMC,SAASC,IAAAA,iBAAQ,EACnBL,OACAC,KACA;gBACIK,YAAY;gBACZC,YAAY;gBACZC,YAAY;gBACZ,GAAGN,OAAO;YACd,GACA;gBAAEJ,QAAQ,IAAI,CAACA,MAAM;gBAAE,GAAGK,OAAO;YAAC;YAEtC,IAAIC,WAAW,MAAM;gBACjB,OAAO;oBAAC;iBAAK;YACjB;YAEA,OAAO;gBAAC;gBAAOA;aAAO;QAC1B;QASA;;;;;SAKC,GACDL,MAAMU,QAAQ,EAAE;YACZJ,IAAAA,iBAAQ,EAAC,IAAI,CAACL,KAAK,EAAES,UAAU;gBAAEH,YAAY;gBAAMC,YAAY;YAAK,GAAG;gBAAET,QAAQ,IAAI,CAACY,WAAW,CAACZ,MAAM;YAAC;YACzG,OAAO,IAAI;QACf;QAhBA;;SAEC,GACDY,YAAYV,KAAK,CAAE;YACf,IAAI,CAACA,KAAK,GAAGA;QACjB;IAYJ;IAEA,OAAOH;AACX;AAEAF,IAAAA,yBAAc,EAACgB,eAAa;AAC5Bf,IAAAA,2BAAgB,EAACe,eAAa;AAE9B,MAAMC,aAAapB,UAAUmB,eAAa;MAE1C,WAAeC"}