{"version":3,"sources":["../../src/utils/Rules.js"],"sourcesContent":["import {isWrappedWith, unwrap} from '@kitmi/utils';\n\nexport const isRawSql = (value) => isWrappedWith(value, 'r#\"', '\"#');\nexport const extractRawSql = (value) => unwrap(value, 'r#\"', '\"#');\n\nexport const xrRawValue = (value) => ({ $xr: 'Raw', value });\nexport const xrColumn = (name) => ({ $xr: 'Column', name });\nexport const xrCall = (name, args) => ({ $xr: 'Function', name, args });\nexport const xrExpr = (left, op, right) => ({ $xr: 'BinExpr', left, op, right });\n\n/*\n $xr: Xeml Runtime Type\n ------------\n Column { name }\n Function { name, args }\n Raw { value }\n Query { query }\n BinExpr { left, op, right }\n DataSet { model, query }\n\n SessionVariable\n QueryVariable\n SymbolToken\n */\n\n/*\nqueryCount = (alias, fieldName) => ({\n    type: 'function',\n    name: 'COUNT',\n    args: [fieldName || '*'],\n    alias: alias || 'count',\n});\n\n$call = (name, alias, args, extra) => ({\n    ...extra,\n    type: 'function',\n    name,\n    alias,\n    args,\n});\n$as = (name, alias) => ({ type: 'column', name, alias });\n\n// in mysql, null value comparison will never return true, even null != 1\nnullOrIs = (fieldName, value) => [{ [fieldName]: { $exists: false } }, { [fieldName]: { $eq: value } }];\n*/\n"],"names":["extractRawSql","isRawSql","xrCall","xrColumn","xrExpr","xrRawValue","value","isWrappedWith","unwrap","$xr","name","args","left","op","right"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAGaA,aAAa;eAAbA;;IADAC,QAAQ;eAARA;;IAKAC,MAAM;eAANA;;IADAC,QAAQ;eAARA;;IAEAC,MAAM;eAANA;;IAHAC,UAAU;eAAVA;;;uBALuB;AAE7B,MAAMJ,WAAW,CAACK,QAAUC,IAAAA,oBAAa,EAACD,OAAO,OAAO;AACxD,MAAMN,gBAAgB,CAACM,QAAUE,IAAAA,aAAM,EAACF,OAAO,OAAO;AAEtD,MAAMD,aAAa,CAACC,QAAW,CAAA;QAAEG,KAAK;QAAOH;IAAM,CAAA;AACnD,MAAMH,WAAW,CAACO,OAAU,CAAA;QAAED,KAAK;QAAUC;IAAK,CAAA;AAClD,MAAMR,SAAS,CAACQ,MAAMC,OAAU,CAAA;QAAEF,KAAK;QAAYC;QAAMC;IAAK,CAAA;AAC9D,MAAMP,SAAS,CAACQ,MAAMC,IAAIC,QAAW,CAAA;QAAEL,KAAK;QAAWG;QAAMC;QAAIC;IAAM,CAAA,GAE9E;;;;;;;;;;;;;CAaC,IAED;;;;;;;;;;;;;;;;;;;AAmBA"}