{"version":3,"sources":["../src/defaultSyntax.js"],"sourcesContent":["import { _ } from '@kitmi/utils';\n\nconst PROCESSOR_PREFIX = '#!';\n\n// syntax: <PROCESSOR_PREFIX><TOKEN>:\n\nconst JS_VALUE_TOKEN = 'jsv';\nconst ES6_TEMPLATE_TOKEN = 'es6';\nconst JS_SWIG_TOKEN = 'swig';\nconst FN_TOKEN = 'fn';\n\nconst esTemplateSetting = {\n    interpolate: /\\$\\{([\\s\\S]+?)\\}/g,\n};\n\nconst swigTemplateSetting = {\n    interpolate: /{{([\\s\\S]+?)}}/g,\n};\n\nconst processors = {\n    [JS_VALUE_TOKEN]: (str, variables) => {\n        // eslint-disable-next-line no-new-func\n        return new Function('v', 'with (v) { return (' + str + ')}')(variables);\n    },\n    [ES6_TEMPLATE_TOKEN]: (str, variables) => {\n        str = str.trim();\n        if (str) {\n            return _.template(str, esTemplateSetting)(variables);\n        }\n\n        return str;\n    },\n    [JS_SWIG_TOKEN]: (str, variables) => {\n        str = str.trim();\n        if (str) {\n            return _.template(str, swigTemplateSetting)(variables);\n        }\n\n        return str;\n    },\n    [FN_TOKEN]: (str) => {\n        // eslint-disable-next-line no-new-func\n        return new Function('v', `with (v) { ${str} }`);\n    },\n};\n\nexport default {\n    prefix: PROCESSOR_PREFIX,\n    processors,\n};\n"],"names":["PROCESSOR_PREFIX","JS_VALUE_TOKEN","ES6_TEMPLATE_TOKEN","JS_SWIG_TOKEN","FN_TOKEN","esTemplateSetting","interpolate","swigTemplateSetting","processors","str","variables","Function","trim","_","template","prefix"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA8CA;;;eAAA;;;uBA9CkB;AAElB,MAAMA,mBAAmB;AAEzB,qCAAqC;AAErC,MAAMC,iBAAiB;AACvB,MAAMC,qBAAqB;AAC3B,MAAMC,gBAAgB;AACtB,MAAMC,WAAW;AAEjB,MAAMC,oBAAoB;IACtBC,aAAa;AACjB;AAEA,MAAMC,sBAAsB;IACxBD,aAAa;AACjB;AAEA,MAAME,aAAa;IACf,CAACP,eAAe,EAAE,CAACQ,KAAKC;QACpB,uCAAuC;QACvC,OAAO,IAAIC,SAAS,KAAK,wBAAwBF,MAAM,MAAMC;IACjE;IACA,CAACR,mBAAmB,EAAE,CAACO,KAAKC;QACxBD,MAAMA,IAAIG,IAAI;QACd,IAAIH,KAAK;YACL,OAAOI,QAAC,CAACC,QAAQ,CAACL,KAAKJ,mBAAmBK;QAC9C;QAEA,OAAOD;IACX;IACA,CAACN,cAAc,EAAE,CAACM,KAAKC;QACnBD,MAAMA,IAAIG,IAAI;QACd,IAAIH,KAAK;YACL,OAAOI,QAAC,CAACC,QAAQ,CAACL,KAAKF,qBAAqBG;QAChD;QAEA,OAAOD;IACX;IACA,CAACL,SAAS,EAAE,CAACK;QACT,uCAAuC;QACvC,OAAO,IAAIE,SAAS,KAAK,CAAC,WAAW,EAAEF,IAAI,EAAE,CAAC;IAClD;AACJ;MAEA,WAAe;IACXM,QAAQf;IACRQ;AACJ"}