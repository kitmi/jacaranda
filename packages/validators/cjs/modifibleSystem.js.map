{"version":3,"sources":["../src/modifibleSystem.js"],"sourcesContent":["import { createTypeSystem, InvalidArgument } from '@kitmi/types';\nimport { _ } from '@kitmi/utils';\n\nconst createModifiableSystem = () => {\n    const validator = createTypeSystem();\n    const handlers = {\n        validator: {},\n        processor: {},\n        activator: {},\n    };\n\n    validator.handlers = handlers;\n\n    validator.addModifier = (type, name, modifier) => {\n        if (name in handlers[type]) {\n            throw new InvalidArgument(`The ${type} with name \"${name}\" already exists`);\n        }\n\n        handlers[type][name] = modifier;\n    };\n\n    validator.addValidator = (name, validate) => validator.addModifier('validator', name, validate);\n\n    validator.addProcessor = (name, processor) => validator.addModifier('processor', name, processor);\n\n    validator.addActivator = (name, activator) => validator.addModifier('activator', name, activator);\n\n    validator.addModifiers = (type, modifiersSet) => {\n        _.each(modifiersSet, (modifier, name) => validator.addModifier(type, name, modifier));\n    };\n\n    return validator;\n};\n\nexport default createModifiableSystem;\n"],"names":["createModifiableSystem","validator","createTypeSystem","handlers","processor","activator","addModifier","type","name","modifier","InvalidArgument","addValidator","validate","addProcessor","addActivator","addModifiers","modifiersSet","_","each"],"mappings":";;;;+BAkCA;;;eAAA;;;uBAlCkD;uBAChC;AAElB,MAAMA,yBAAyB;IAC3B,MAAMC,YAAYC,IAAAA,uBAAgB;IAClC,MAAMC,WAAW;QACbF,WAAW,CAAC;QACZG,WAAW,CAAC;QACZC,WAAW,CAAC;IAChB;IAEAJ,UAAUE,QAAQ,GAAGA;IAErBF,UAAUK,WAAW,GAAG,CAACC,MAAMC,MAAMC;QACjC,IAAID,QAAQL,QAAQ,CAACI,KAAK,EAAE;YACxB,MAAM,IAAIG,sBAAe,CAAC,CAAC,IAAI,EAAEH,KAAK,YAAY,EAAEC,KAAK,gBAAgB,CAAC;QAC9E;QAEAL,QAAQ,CAACI,KAAK,CAACC,KAAK,GAAGC;IAC3B;IAEAR,UAAUU,YAAY,GAAG,CAACH,MAAMI,WAAaX,UAAUK,WAAW,CAAC,aAAaE,MAAMI;IAEtFX,UAAUY,YAAY,GAAG,CAACL,MAAMJ,YAAcH,UAAUK,WAAW,CAAC,aAAaE,MAAMJ;IAEvFH,UAAUa,YAAY,GAAG,CAACN,MAAMH,YAAcJ,UAAUK,WAAW,CAAC,aAAaE,MAAMH;IAEvFJ,UAAUc,YAAY,GAAG,CAACR,MAAMS;QAC5BC,QAAC,CAACC,IAAI,CAACF,cAAc,CAACP,UAAUD,OAASP,UAAUK,WAAW,CAACC,MAAMC,MAAMC;IAC/E;IAEA,OAAOR;AACX;MAEA,WAAeD"}