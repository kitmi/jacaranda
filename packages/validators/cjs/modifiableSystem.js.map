{"version":3,"sources":["../src/modifiableSystem.js"],"sourcesContent":["import { createTypeSystem, InvalidArgument } from '@kitmi/types';\nimport { _ } from '@kitmi/utils';\n\nconst createModifiableSystem = (postProcess) => {\n    const system = createTypeSystem();\n    const handlers = {\n        validator: {},\n        processor: {},\n        activator: {},\n    };\n\n    system.handlers = handlers;\n\n    system.addModifier = (type, name, modifier) => {\n        if (name in handlers[type]) {\n            throw new InvalidArgument(`The ${type} with name \"${name}\" already exists`);\n        }\n\n        handlers[type][name] = modifier;\n    };\n\n    system.addValidator = (name, validate) => system.addModifier('validator', name, validate);\n\n    system.addProcessor = (name, processor) => system.addModifier('processor', name, processor);\n\n    system.addActivator = (name, activator) => system.addModifier('activator', name, activator);\n\n    system.addModifiers = (type, modifiersSet) => {\n        _.each(modifiersSet, (modifier, name) => system.addModifier(type, name, modifier));\n    };\n\n    system.addPlugin('postProcess', postProcess);\n\n    return system;\n};\n\nexport default createModifiableSystem;\n"],"names":["createModifiableSystem","postProcess","system","createTypeSystem","handlers","validator","processor","activator","addModifier","type","name","modifier","InvalidArgument","addValidator","validate","addProcessor","addActivator","addModifiers","modifiersSet","_","each","addPlugin"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAoCA;;;eAAA;;;uBApCkD;uBAChC;AAElB,MAAMA,yBAAyB,CAACC;IAC5B,MAAMC,SAASC,IAAAA,uBAAgB;IAC/B,MAAMC,WAAW;QACbC,WAAW,CAAC;QACZC,WAAW,CAAC;QACZC,WAAW,CAAC;IAChB;IAEAL,OAAOE,QAAQ,GAAGA;IAElBF,OAAOM,WAAW,GAAG,CAACC,MAAMC,MAAMC;QAC9B,IAAID,QAAQN,QAAQ,CAACK,KAAK,EAAE;YACxB,MAAM,IAAIG,sBAAe,CAAC,CAAC,IAAI,EAAEH,KAAK,YAAY,EAAEC,KAAK,gBAAgB,CAAC;QAC9E;QAEAN,QAAQ,CAACK,KAAK,CAACC,KAAK,GAAGC;IAC3B;IAEAT,OAAOW,YAAY,GAAG,CAACH,MAAMI,WAAaZ,OAAOM,WAAW,CAAC,aAAaE,MAAMI;IAEhFZ,OAAOa,YAAY,GAAG,CAACL,MAAMJ,YAAcJ,OAAOM,WAAW,CAAC,aAAaE,MAAMJ;IAEjFJ,OAAOc,YAAY,GAAG,CAACN,MAAMH,YAAcL,OAAOM,WAAW,CAAC,aAAaE,MAAMH;IAEjFL,OAAOe,YAAY,GAAG,CAACR,MAAMS;QACzBC,QAAC,CAACC,IAAI,CAACF,cAAc,CAACP,UAAUD,OAASR,OAAOM,WAAW,CAACC,MAAMC,MAAMC;IAC5E;IAEAT,OAAOmB,SAAS,CAAC,eAAepB;IAEhC,OAAOC;AACX;MAEA,WAAeF"}