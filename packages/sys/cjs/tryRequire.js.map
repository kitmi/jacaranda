{"version":3,"sources":["../src/tryRequire.js"],"sourcesContent":["import { createRequire } from 'node:module';\nimport path from 'node:path';\n\nfunction tryRequireBy(packageName, mainModule, throwWhenNotFound) {\n    try {\n        const require2 = createRequire(\n            mainModule.endsWith('/') || mainModule.endsWith('\\\\') ? mainModule : mainModule + path.sep\n        );\n\n        return require2(packageName);\n    } catch (error) {\n        if (error.code === 'MODULE_NOT_FOUND') {\n            if (throwWhenNotFound) {\n                let pkgPaths = packageName.split('/');\n                let npmPkgName = pkgPaths[0];\n\n                if (npmPkgName.startsWith('.')) {\n                    //path\n                    throw error;\n                }\n\n                throw error;\n            }\n\n            return undefined;\n        }\n\n        throw error;\n    }\n}\n\n/**\n * Try require a package module and show install tips if not found.\n * @alias helpers.tryRequire\n * @param {String} packageName\n * @param {String} [basePath] - Base path to find the module\n * @returns {Object}\n */\nfunction tryRequire(packageName, basePath) {\n    // relative path\n    const isRelative = packageName.indexOf(path.sep) > 0 && packageName.startsWith('.');\n    if (isRelative) {\n        packageName = path.resolve(basePath ?? '', packageName);\n    }\n\n    if (packageName.startsWith('@') || path.isAbsolute(packageName)) {\n        try {\n            return require(packageName);\n        } catch (error) {\n            if (error.code !== 'MODULE_NOT_FOUND') {\n                throw error;\n            }            \n        }\n    }\n\n    basePath != null || (basePath = process.cwd());\n\n    return tryRequireBy(packageName, basePath, true);\n}\n\nexport default tryRequire;\n"],"names":["tryRequireBy","packageName","mainModule","throwWhenNotFound","require2","createRequire","endsWith","path","sep","error","code","pkgPaths","split","npmPkgName","startsWith","undefined","tryRequire","basePath","isRelative","indexOf","resolve","isAbsolute","require","process","cwd"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BA4DA;;;eAAA;;;4BA5D8B;iEACb;;;;;;AAEjB,SAASA,aAAaC,WAAW,EAAEC,UAAU,EAAEC,iBAAiB;IAC5D,IAAI;QACA,MAAMC,WAAWC,IAAAA,yBAAa,EAC1BH,WAAWI,QAAQ,CAAC,QAAQJ,WAAWI,QAAQ,CAAC,QAAQJ,aAAaA,aAAaK,iBAAI,CAACC,GAAG;QAG9F,OAAOJ,SAASH;IACpB,EAAE,OAAOQ,OAAO;QACZ,IAAIA,MAAMC,IAAI,KAAK,oBAAoB;YACnC,IAAIP,mBAAmB;gBACnB,IAAIQ,WAAWV,YAAYW,KAAK,CAAC;gBACjC,IAAIC,aAAaF,QAAQ,CAAC,EAAE;gBAE5B,IAAIE,WAAWC,UAAU,CAAC,MAAM;oBAC5B,MAAM;oBACN,MAAML;gBACV;gBAEA,MAAMA;YACV;YAEA,OAAOM;QACX;QAEA,MAAMN;IACV;AACJ;AAEA;;;;;;CAMC,GACD,SAASO,WAAWf,WAAW,EAAEgB,QAAQ;IACrC,gBAAgB;IAChB,MAAMC,aAAajB,YAAYkB,OAAO,CAACZ,iBAAI,CAACC,GAAG,IAAI,KAAKP,YAAYa,UAAU,CAAC;IAC/E,IAAII,YAAY;QACZjB,cAAcM,iBAAI,CAACa,OAAO,CAACH,YAAY,IAAIhB;IAC/C;IAEA,IAAIA,YAAYa,UAAU,CAAC,QAAQP,iBAAI,CAACc,UAAU,CAACpB,cAAc;QAC7D,IAAI;YACA,OAAOqB,QAAQrB;QACnB,EAAE,OAAOQ,OAAO;YACZ,IAAIA,MAAMC,IAAI,KAAK,oBAAoB;gBACnC,MAAMD;YACV;QACJ;IACJ;IAEAQ,YAAY,QAASA,CAAAA,WAAWM,QAAQC,GAAG,EAAC;IAE5C,OAAOxB,aAAaC,aAAagB,UAAU;AAC/C;MAEA,WAAeD"}