{"version":3,"sources":["../../src/errors/AppErrors.js"],"sourcesContent":["import HttpCode from './HttpCode';\n\n/**\n * App errors.\n * @module AppErrors\n */\n\n/**\n * General errors with error info, http status and error code.\n * @class\n * @extends Error\n */\nexport class GeneralError extends Error {\n    constructor(message, info, status, code) {\n        super(message);\n\n        this.name = this.constructor.name;\n        let typeOfInfo = typeof info;\n        let typeOfStatus = typeof status;\n        let typeOfCode = typeof code;\n\n        if (typeOfCode === 'undefined') {\n            if (typeOfStatus === 'string') {\n                code = status;\n                status = undefined;\n                typeOfStatus = 'undefined';\n            }\n        }\n\n        if (typeOfStatus === 'undefined') {\n            if (typeOfInfo === 'number') {\n                status = info;\n                info = undefined;\n            }\n\n            if (typeOfCode === 'undefined' && typeOfInfo === 'string') {\n                code = info;\n                info = undefined;\n            }\n        }\n\n        /**\n         * Error information\n         * @member {object}\n         */\n        this.info = info;\n\n        /**\n         * Http status\n         * @member {number}\n         */\n        this.status = status;\n\n        /**\n         * Error code\n         * @member {string}\n         */\n        this.code = code;\n    }\n}\n\n/**\n * Application errors mostly caused wrong coding or usage of functions. \n * @class\n * @extends GeneralError\n */\nexport class ApplicationError extends GeneralError {\n    /**\n     * @param {string} message - Error message\n     * @param {*} info\n     * @param {*} code\n     */\n    constructor(message, info, code) {\n        super(message, info, HttpCode.INTERNAL_SERVER_ERROR, code || 'E_APP');\n    }\n}\n\n/**\n * Error caused by invalid configuration.\n * @class\n * @extends ApplicationError\n */\nexport class InvalidConfiguration extends ApplicationError {\n    /**\n     * @param {string} message - Error message\n     * @param {App} [app] - The related app module\n     * @param {string} [item] - The related config item\n     */\n    constructor(message, app, item) {\n        super(message, { app: app.name, item }, 'E_INVALID_CONF');\n    }\n}\n\n/**\n * Error caused by invalid function argument. Not suitable for http request, which should use BadRequest\n * @class\n * @extends InvalidArgument\n */\nexport class InvalidArgument extends ApplicationError {\n    /**\n     * @param {string} message - Error message\n     * @param {*} [info] - Extra info\n     * @param {string} [item] - The related config item\n     */\n    constructor(message, info) {\n        super(message, info, 'E_INVALID_ARG');\n    }\n}\n\n/**\n * Error which will expose the detailed error message to end-users.\n */\nexport class ExposableError extends GeneralError {\n    expose = true;\n}\n"],"names":["ApplicationError","ExposableError","GeneralError","InvalidArgument","InvalidConfiguration","Error","constructor","message","info","status","code","name","typeOfInfo","typeOfStatus","typeOfCode","undefined","HttpCode","INTERNAL_SERVER_ERROR","app","item","expose"],"mappings":";;;;;;;;;;;IAkEaA,gBAAgB;eAAhBA;;IA8CAC,cAAc;eAAdA;;IApGAC,YAAY;eAAZA;;IAsFAC,eAAe;eAAfA;;IAhBAC,oBAAoB;eAApBA;;;iEAlFQ;;;;;;;;;;;;;;;;;;;AAYd,MAAMF,qBAAqBG;IAC9BC,YAAYC,OAAO,EAAEC,IAAI,EAAEC,MAAM,EAAEC,IAAI,CAAE;QACrC,KAAK,CAACH;QAEN,IAAI,CAACI,IAAI,GAAG,IAAI,CAACL,WAAW,CAACK,IAAI;QACjC,IAAIC,aAAa,OAAOJ;QACxB,IAAIK,eAAe,OAAOJ;QAC1B,IAAIK,aAAa,OAAOJ;QAExB,IAAII,eAAe,aAAa;YAC5B,IAAID,iBAAiB,UAAU;gBAC3BH,OAAOD;gBACPA,SAASM;gBACTF,eAAe;YACnB;QACJ;QAEA,IAAIA,iBAAiB,aAAa;YAC9B,IAAID,eAAe,UAAU;gBACzBH,SAASD;gBACTA,OAAOO;YACX;YAEA,IAAID,eAAe,eAAeF,eAAe,UAAU;gBACvDF,OAAOF;gBACPA,OAAOO;YACX;QACJ;QAEA;;;SAGC,GACD,IAAI,CAACP,IAAI,GAAGA;QAEZ;;;SAGC,GACD,IAAI,CAACC,MAAM,GAAGA;QAEd;;;SAGC,GACD,IAAI,CAACC,IAAI,GAAGA;IAChB;AACJ;AAOO,MAAMV,yBAAyBE;IAClC;;;;KAIC,GACDI,YAAYC,OAAO,EAAEC,IAAI,EAAEE,IAAI,CAAE;QAC7B,KAAK,CAACH,SAASC,MAAMQ,iBAAQ,CAACC,qBAAqB,EAAEP,QAAQ;IACjE;AACJ;AAOO,MAAMN,6BAA6BJ;IACtC;;;;KAIC,GACDM,YAAYC,OAAO,EAAEW,GAAG,EAAEC,IAAI,CAAE;QAC5B,KAAK,CAACZ,SAAS;YAAEW,KAAKA,IAAIP,IAAI;YAAEQ;QAAK,GAAG;IAC5C;AACJ;AAOO,MAAMhB,wBAAwBH;IACjC;;;;KAIC,GACDM,YAAYC,OAAO,EAAEC,IAAI,CAAE;QACvB,KAAK,CAACD,SAASC,MAAM;IACzB;AACJ;AAKO,MAAMP,uBAAuBC;;;QAChCkB,uBAAAA,UAAS;;AACb"}