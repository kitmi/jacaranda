{"version":3,"sources":["../../src/features/customConfig.js"],"sourcesContent":["/**\n * Enable custom config identified by config path.\n * @module Feature_CustomConfig\n */\n\nimport path from 'node:path';\nimport { JsonConfigProvider, YamlConfigProvider } from '@kitmi/config';\nimport { InvalidConfiguration } from '@kitmi/types';\nimport Feature from '../Feature';\n\nexport default {\n    /**\n     * This feature is loaded at configuration stage\n     * @member {string}\n     */\n    stage: Feature.CONF,\n\n    /**\n     * Load the feature\n     * @param {App} app - The cli app module object\n     * @param {string} configPath - Custom config file path\n     * @returns {Promise.<*>}\n     */\n    load_: async (app, configPath, name) => {\n        const isJson = configPath.endsWith('.json');\n        if (isJson) {\n            app.configLoader.provider = new JsonConfigProvider(path.resolve(configPath));\n        } else {\n            const isYaml = configPath.endsWith('.yaml');\n            if (isYaml) {\n                app.configLoader.provider = new YamlConfigProvider(path.resolve(configPath));\n            } else {\n                throw new InvalidConfiguration(`Unsupported config file type: ${configPath}`, app, name);\n            }\n        }\n        \n        return app.loadConfig_();\n    },\n};\n"],"names":["stage","Feature","CONF","load_","app","configPath","name","isJson","endsWith","configLoader","provider","JsonConfigProvider","path","resolve","isYaml","YamlConfigProvider","InvalidConfiguration","loadConfig_"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA;;;CAGC;;;;+BAOD;;;eAAA;;;iEALiB;wBACsC;uBAClB;gEACjB;;;;;;MAEpB,WAAe;IACX;;;KAGC,GACDA,OAAOC,gBAAO,CAACC,IAAI;IAEnB;;;;;KAKC,GACDC,OAAO,OAAOC,KAAKC,YAAYC;QAC3B,MAAMC,SAASF,WAAWG,QAAQ,CAAC;QACnC,IAAID,QAAQ;YACRH,IAAIK,YAAY,CAACC,QAAQ,GAAG,IAAIC,0BAAkB,CAACC,iBAAI,CAACC,OAAO,CAACR;QACpE,OAAO;YACH,MAAMS,SAAST,WAAWG,QAAQ,CAAC;YACnC,IAAIM,QAAQ;gBACRV,IAAIK,YAAY,CAACC,QAAQ,GAAG,IAAIK,0BAAkB,CAACH,iBAAI,CAACC,OAAO,CAACR;YACpE,OAAO;gBACH,MAAM,IAAIW,2BAAoB,CAAC,CAAC,8BAA8B,EAAEX,WAAW,CAAC,EAAED,KAAKE;YACvF;QACJ;QAEA,OAAOF,IAAIa,WAAW;IAC1B;AACJ"}