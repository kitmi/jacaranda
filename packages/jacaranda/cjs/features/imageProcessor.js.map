{"version":3,"sources":["../../src/features/imageProcessor.js"],"sourcesContent":["import Feature from '../Feature';\n\n/**\n * Fast image processor (sharp)\n * @module Feature_ImageProcessor\n */\n\nexport default {\n    /**\n     * This feature is loaded at service stage\n     * @member {string}\n     */\n    stage: Feature.SERVICE,\n\n    packages: ['sharp'],\n\n    /**\n     * Load the feature\n     * @param {App} app - The app module object\n     * @param {object} [options] - Options for the feature\n     * @returns {Promise.<*>}\n     *\n     * @see[methods]{@link https://sharp.pixelplumbing.com}\n     *\n     */\n    load_: async function (app, options, name) {\n        const Sharp = await app.tryRequire_('sharp');\n        const service = {\n            fromFile: (fileName, opts) => new Sharp(fileName, opts),\n            fromBuffer: (buffer, opts) => new Sharp(buffer, opts && { raw: opts }),\n            create: (opts) => new Sharp(opts && { create: opts }),\n        };\n\n        app.registerService(name, service);\n    },\n};\n"],"names":["stage","Feature","SERVICE","packages","load_","app","options","name","Sharp","tryRequire_","service","fromFile","fileName","opts","fromBuffer","buffer","raw","create","registerService"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAEA;;;CAGC,GAED;;;eAAA;;;gEAPoB;;;;;;MAOpB,WAAe;IACX;;;KAGC,GACDA,OAAOC,gBAAO,CAACC,OAAO;IAEtBC,UAAU;QAAC;KAAQ;IAEnB;;;;;;;;KAQC,GACDC,OAAO,eAAgBC,GAAG,EAAEC,OAAO,EAAEC,IAAI;QACrC,MAAMC,QAAQ,MAAMH,IAAII,WAAW,CAAC;QACpC,MAAMC,UAAU;YACZC,UAAU,CAACC,UAAUC,OAAS,IAAIL,MAAMI,UAAUC;YAClDC,YAAY,CAACC,QAAQF,OAAS,IAAIL,MAAMO,QAAQF,QAAQ;oBAAEG,KAAKH;gBAAK;YACpEI,QAAQ,CAACJ,OAAS,IAAIL,MAAMK,QAAQ;oBAAEI,QAAQJ;gBAAK;QACvD;QAEAR,IAAIa,eAAe,CAACX,MAAMG;IAC9B;AACJ"}