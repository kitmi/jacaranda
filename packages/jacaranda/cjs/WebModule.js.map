{"version":3,"sources":["../src/WebModule.js"],"sourcesContent":["import { _, text } from '@kitmi/utils';\nimport ServiceContainer from './ServiceContainer';\nimport ModuleBase from './ModuleBase';\nimport Routable from './Routable';\nimport { defaultWebModuleOpts } from './defaultServerOpts';\n\n/**\n * Web application module class.\n * @class\n * @extends ModuleBase(Routable(ServiceContainer))\n */\nclass WebModule extends ModuleBase(Routable(ServiceContainer)) {\n    /**\n     * @param {WebServer} server\n     * @param {string} name - The name of the app module.\n     * @param {string} route - The base route of the app module.\n     * @param {string} appPath - The path to load the app's module files\n     * @param {object} [options] - The app module's extra options defined in its parent's configuration.\n     */\n    constructor(server, name, route, appPath, options) {\n        super(server, name, appPath, { ...defaultWebModuleOpts, ...options });\n\n        this.server = this.host;\n        this.router = this.server.engine.createModuleRouter(this);\n\n        /**\n         * Mounting route.\n         * @member {string}\n         */\n        this.route = text.ensureStartsWith(text.dropIfEndsWith(route, '/'), '/');        \n    }\n}\n\nexport default WebModule;\n"],"names":["WebModule","ModuleBase","Routable","ServiceContainer","constructor","server","name","route","appPath","options","defaultWebModuleOpts","host","router","engine","createModuleRouter","text","ensureStartsWith","dropIfEndsWith"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAiCA;;;eAAA;;;uBAjCwB;yEACK;mEACN;iEACF;mCACgB;;;;;;AAErC;;;;CAIC,GACD,MAAMA,kBAAkBC,IAAAA,mBAAU,EAACC,IAAAA,iBAAQ,EAACC,yBAAgB;IACxD;;;;;;KAMC,GACDC,YAAYC,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAEC,OAAO,EAAEC,OAAO,CAAE;QAC/C,KAAK,CAACJ,QAAQC,MAAME,SAAS;YAAE,GAAGE,uCAAoB;YAAE,GAAGD,OAAO;QAAC;QAEnE,IAAI,CAACJ,MAAM,GAAG,IAAI,CAACM,IAAI;QACvB,IAAI,CAACC,MAAM,GAAG,IAAI,CAACP,MAAM,CAACQ,MAAM,CAACC,kBAAkB,CAAC,IAAI;QAExD;;;SAGC,GACD,IAAI,CAACP,KAAK,GAAGQ,WAAI,CAACC,gBAAgB,CAACD,WAAI,CAACE,cAAc,CAACV,OAAO,MAAM;IACxE;AACJ;MAEA,WAAeP"}