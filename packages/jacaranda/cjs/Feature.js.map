{"version":3,"sources":["../src/Feature.js"],"sourcesContent":["/**\n * Feature loading stage\n */\nconst Feature = {\n    /**\n     * Configuration, for loading config or overriding config\n     */\n    CONF: 'Config',\n    /**\n     * Initialization, e.g. settings\n     */\n    INIT: 'Initial',\n    /**\n     * Services, e.g. loggers, i18n\n     */\n    SERVICE: 'Services',\n    /**\n     * Loading plugins, e.g. middlewares, bootstrap\n     */\n    PLUGIN: 'Plugins',\n    /**\n     * Final preparation before service container get into work\n     */\n    FINAL: 'Final',\n\n    /**\n     * Validate a feature object.\n     * @param {object} featureObject - Feature object\n     * @property {string} featureObject.type - Feature loading stage\n     * @property {function} featureObject.load_ - Feature loading method\n     * @returns {bool}\n     */\n    validate(featureObject) {\n        return (\n            featureObject &&\n            typeof featureObject === 'object' &&\n            (featureObject.stage == null || Stages.includes(featureObject.stage)) &&\n            typeof featureObject.load_ === 'function' &&\n            (featureObject.packages == null ||\n                Array.isArray(featureObject.packages) ||\n                typeof featureObject.packages === 'function') &&\n            (featureObject.depends == null || Array.isArray(featureObject.depends)) &&\n            (featureObject.level == null ||\n                (Array.isArray(featureObject.level) && featureObject.level.every((l) => Levels.includes(l))))\n        );\n    },\n};\n\nconst Levels = ['general', 'web', 'app', 'server'];\n\nconst Stages = [Feature.CONF, Feature.INIT, Feature.SERVICE, Feature.PLUGIN, Feature.FINAL];\n\nexport default Feature;\n"],"names":["Feature","CONF","INIT","SERVICE","PLUGIN","FINAL","validate","featureObject","stage","Stages","includes","load_","packages","Array","isArray","depends","level","every","l","Levels"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA;;CAEC;;;;+BAkDD;;;eAAA;;;AAjDA,MAAMA,UAAU;IACZ;;KAEC,GACDC,MAAM;IACN;;KAEC,GACDC,MAAM;IACN;;KAEC,GACDC,SAAS;IACT;;KAEC,GACDC,QAAQ;IACR;;KAEC,GACDC,OAAO;IAEP;;;;;;KAMC,GACDC,UAASC,aAAa;QAClB,OACIA,iBACA,OAAOA,kBAAkB,YACxBA,CAAAA,cAAcC,KAAK,IAAI,QAAQC,OAAOC,QAAQ,CAACH,cAAcC,KAAK,CAAA,KACnE,OAAOD,cAAcI,KAAK,KAAK,cAC9BJ,CAAAA,cAAcK,QAAQ,IAAI,QACvBC,MAAMC,OAAO,CAACP,cAAcK,QAAQ,KACpC,OAAOL,cAAcK,QAAQ,KAAK,UAAS,KAC9CL,CAAAA,cAAcQ,OAAO,IAAI,QAAQF,MAAMC,OAAO,CAACP,cAAcQ,OAAO,CAAA,KACpER,CAAAA,cAAcS,KAAK,IAAI,QACnBH,MAAMC,OAAO,CAACP,cAAcS,KAAK,KAAKT,cAAcS,KAAK,CAACC,KAAK,CAAC,CAACC,IAAMC,OAAOT,QAAQ,CAACQ,GAAG;IAEvG;AACJ;AAEA,MAAMC,SAAS;IAAC;IAAW;IAAO;IAAO;CAAS;AAElD,MAAMV,SAAS;IAACT,QAAQC,IAAI;IAAED,QAAQE,IAAI;IAAEF,QAAQG,OAAO;IAAEH,QAAQI,MAAM;IAAEJ,QAAQK,KAAK;CAAC;MAE3F,WAAeL"}