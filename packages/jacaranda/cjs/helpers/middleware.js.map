{"version":3,"sources":["../../src/helpers/middleware.js"],"sourcesContent":["import { ApplicationError } from '@kitmi/types';\n\n/**\n * Decorator for adding middlewares to a function.\n * @param  {...any} middlewares\n * @returns {Function}\n */\nfunction middleware(...middlewares) {\n    return function (target, name, descriptor) {\n        let targetFunction,\n            isHof = false;\n\n        if (arguments.length === 1 && typeof target === 'function') {\n            targetFunction = target;\n            isHof = true;\n        } else if (descriptor && descriptor.value) {\n            targetFunction = descriptor.value;\n            descriptor.enumerable = true;\n        } else {\n            throw new ApplicationError('Invalid usage of middleware decorator.');\n        }\n\n        if (middlewares.length > 0) {\n            targetFunction.__metaMiddlewares = middlewares;\n        }\n\n        return isHof ? targetFunction : descriptor;\n    };\n}\n\nexport default middleware;\n"],"names":["middleware","middlewares","target","name","descriptor","targetFunction","isHof","arguments","length","value","enumerable","ApplicationError","__metaMiddlewares"],"mappings":";;;;+BA8BA;;;eAAA;;;uBA9BiC;AAEjC;;;;CAIC,GACD,SAASA,WAAW,GAAGC,WAAW;IAC9B,OAAO,SAAUC,MAAM,EAAEC,IAAI,EAAEC,UAAU;QACrC,IAAIC,gBACAC,QAAQ;QAEZ,IAAIC,UAAUC,MAAM,KAAK,KAAK,OAAON,WAAW,YAAY;YACxDG,iBAAiBH;YACjBI,QAAQ;QACZ,OAAO,IAAIF,cAAcA,WAAWK,KAAK,EAAE;YACvCJ,iBAAiBD,WAAWK,KAAK;YACjCL,WAAWM,UAAU,GAAG;QAC5B,OAAO;YACH,MAAM,IAAIC,uBAAgB,CAAC;QAC/B;QAEA,IAAIV,YAAYO,MAAM,GAAG,GAAG;YACxBH,eAAeO,iBAAiB,GAAGX;QACvC;QAEA,OAAOK,QAAQD,iBAAiBD;IACpC;AACJ;MAEA,WAAeJ"}