{"version":3,"sources":["../../src/helpers/RuntimeRegistry.js"],"sourcesContent":["import { fxargs } from '@kitmi/utils';\n\n/**\n * @class\n */\nclass RuntimeRegistry {\n    modulesRegistry = {};\n\n    /**\n     * Get a runtime module.\n     * @param {string} [ns] - The namespace of the module.\n     * @param {string} moduleName\n     * @returns {object}\n     */\n    get(...args) {\n        let [ns, moduleName] = fxargs(args, ['string?', 'string']);\n        if (ns != null) {\n            moduleName = `${ns}:${moduleName}`;\n        }\n\n        return this.modulesRegistry[moduleName];\n    }\n\n    /**\n     * Register a runtime module.\n     * @param {string} [ns] - The namespace of the module.\n     * @param {string} moduleName - The name of the module.\n     * @param {object} loadedModule - The loaded module.\n     * @param {boolean} [asDefaultOnly] - Whether to register as default only.\n     * @returns {RuntimeRegistry}\n     */\n    register(...args) {\n        let [ns, moduleName, loadedModule, asDefaultOnly] = fxargs(args, [\n            'string?',\n            'string',\n            'object|function',\n            'boolean?',\n        ]);\n        if (ns != null) {\n            moduleName = `${ns}:${moduleName}`;\n        }\n\n        const exists = moduleName in this.modulesRegistry;\n\n        if (!asDefaultOnly && exists) {\n            throw new Error(`Module \"${moduleName}\" already exists.`);\n        }\n\n        if (!exists) {\n            this.modulesRegistry[moduleName] = loadedModule;\n        }\n\n        return this;\n    }\n}\n\nexport default RuntimeRegistry;\n"],"names":["RuntimeRegistry","get","args","ns","moduleName","fxargs","modulesRegistry","register","loadedModule","asDefaultOnly","exists","Error"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAwDA;;;eAAA;;;uBAxDuB;;;;;;;;;;;;;;AAEvB;;CAEC,GACD,MAAMA;IAGF;;;;;KAKC,GACDC,IAAI,GAAGC,IAAI,EAAE;QACT,IAAI,CAACC,IAAIC,WAAW,GAAGC,IAAAA,aAAM,EAACH,MAAM;YAAC;YAAW;SAAS;QACzD,IAAIC,MAAM,MAAM;YACZC,aAAa,CAAC,EAAED,GAAG,CAAC,EAAEC,WAAW,CAAC;QACtC;QAEA,OAAO,IAAI,CAACE,eAAe,CAACF,WAAW;IAC3C;IAEA;;;;;;;KAOC,GACDG,SAAS,GAAGL,IAAI,EAAE;QACd,IAAI,CAACC,IAAIC,YAAYI,cAAcC,cAAc,GAAGJ,IAAAA,aAAM,EAACH,MAAM;YAC7D;YACA;YACA;YACA;SACH;QACD,IAAIC,MAAM,MAAM;YACZC,aAAa,CAAC,EAAED,GAAG,CAAC,EAAEC,WAAW,CAAC;QACtC;QAEA,MAAMM,SAASN,cAAc,IAAI,CAACE,eAAe;QAEjD,IAAI,CAACG,iBAAiBC,QAAQ;YAC1B,MAAM,IAAIC,MAAM,CAAC,QAAQ,EAAEP,WAAW,iBAAiB,CAAC;QAC5D;QAEA,IAAI,CAACM,QAAQ;YACT,IAAI,CAACJ,eAAe,CAACF,WAAW,GAAGI;QACvC;QAEA,OAAO,IAAI;IACf;;QA/CAF,uBAAAA,mBAAkB,CAAC;;AAgDvB;MAEA,WAAeN"}