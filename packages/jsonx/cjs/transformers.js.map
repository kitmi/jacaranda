{"version":3,"sources":["../src/transformers.js"],"sourcesContent":["// JSON Expression Syntax (JES)\nimport { remap, isPlainObject, get as _get, template, filterNull, objectToArray } from '@kitmi/utils';\nimport { Types } from '@kitmi/types';\nimport { validate, test, OP as v_ops } from '@kitmi/jsonv';\n\nimport _size from 'lodash/size';\nimport _reduce from 'lodash/reduce';\nimport _reverse from 'lodash/reverse';\nimport _keys from 'lodash/keys';\nimport _values from 'lodash/values';\nimport _pick from 'lodash/pick';\nimport _pickBy from 'lodash/pickBy';\nimport _nth from 'lodash/nth';\nimport _omit from 'lodash/omit';\nimport _omitBy from 'lodash/omitBy';\nimport _groupBy from 'lodash/groupBy';\nimport _sortBy from 'lodash/sortBy';\nimport _filter from 'lodash/filter';\nimport _map from 'lodash/map';\nimport _mapValues from 'lodash/mapValues';\nimport _findIndex from 'lodash/findIndex';\nimport _findKey from 'lodash/findKey';\nimport _find from 'lodash/find';\nimport _isEqual from 'lodash/isEqual';\nimport _each from 'lodash/each';\n\nimport config, { getChildContext } from './config';\nimport t_ops from './transformerOperators';\n\nimport transform from './transform';\n\nconst MSG = config.messages;\n\nconst UNARY = true;\nconst BINARY = false;\n\n//Query & aggregate operators (pure)\nconst OP_MATCH = [t_ops.MATCH, BINARY, '$has', '$match', '$all', '$validate', '$when'];\nconst OP_SIZE = [t_ops.SIZE, UNARY, '$size', '$length', '$count'];\nconst OP_SUM = [t_ops.SUM, UNARY, '$sum', '$total'];\nconst OP_GET_TYPE = [t_ops.GET_TYPE, UNARY, '$type'];\nconst OP_GET_BY_INDEX = [t_ops.GET_BY_INDEX, BINARY, '$at', '$getByIndex', '$nth']; // supports -1 as the last index, -2 the second last\nconst OP_GET_BY_KEY = [t_ops.GET_BY_KEY, BINARY, '$of', '$valueOf', '$getByKey']; // support key path\nconst OP_FIND_INDEX = [t_ops.FIND_INDEX, BINARY, '$findIndex', '$indexOf', '$keyOf'];\nconst OP_FIND = [t_ops.FIND, BINARY, '$find'];\nconst OP_IF = [t_ops.IF, BINARY, '$if'];\nconst OP_CAST_ARRAY = [t_ops.CAST_ARRAY, UNARY, '$castArray', '$makeArray'];\n\n//Math operators (pure)\nconst OP_ADD = [t_ops.ADD, BINARY, '$add', '$plus', '$inc'];\nconst OP_SUB = [t_ops.SUB, BINARY, '$sub', '$subtract', '$minus', '$dec'];\nconst OP_MUL = [t_ops.MUL, BINARY, '$mul', '$multiply', '$times'];\nconst OP_DIV = [t_ops.DIV, BINARY, '$div', '$divide'];\nconst OP_MOD = [t_ops.MOD, BINARY, '$mod', '$remainder'];\n\n//Collection operators (pure)\nconst OP_KEYS = [t_ops.KEYS, UNARY, '$keys'];\nconst OP_VALUES = [t_ops.VALUES, UNARY, '$values'];\nconst OP_ENTRIES = [t_ops.ENTRIES, UNARY, '$entries', '$pairs'];\nconst OP_FILTER_NULL = [t_ops.FILTER_NULL, UNARY, '$filterNull', '$filterNullValues'];\n\nconst OP_OBJ_TO_ARRAY = [t_ops.OBJ_TO_ARRAY, BINARY, '$toArray', '$objectToArray'];\nconst OP_PICK = [t_ops.PICK, BINARY, '$pick', '$pickBy', '$filterByKeys']; // filter by key\nconst OP_OMIT = [t_ops.OMIT, BINARY, '$omit', '$omitBy'];\nconst OP_SLICE = [t_ops.SLICE, BINARY, '$slice', '$limit'];\nconst OP_GROUP = [t_ops.GROUP, BINARY, '$group', '$groupBy'];\nconst OP_SORT = [t_ops.SORT, BINARY, '$sort', '$orderBy', '$sortBy'];\nconst OP_REVERSE = [t_ops.REVERSE, UNARY, '$reverse'];\nconst OP_JOIN = [t_ops.JOIN, BINARY, '$join', '$implode'];\nconst OP_MERGE = [t_ops.MERGE, BINARY, '$merge']; // merge a list of transform result over the value\nconst OP_FILTER = [t_ops.FILTER, BINARY, '$filter', '$select', '$filterByValue']; // filter by value\nconst OP_REMAP = [t_ops.REMAP, BINARY, '$remap', '$mapKeys']; // reverse-map, map a key to another name\nconst OP_TO_JSON = [t_ops.TO_JSON, UNARY, '$json', '$toJSON', '$stringify'];\nconst OP_TO_OBJ = [t_ops.TO_OBJ, UNARY, '$object', '$toObject', '$parseJSON'];\n\n//Value updater (pure)\nconst OP_SET = [t_ops.SET, BINARY, '$set', '$=', '$value'];\nconst OP_ADD_ITEM = [t_ops.ADD_ITEM, BINARY, '$addItem', '$addFields'];\nconst OP_ASSIGN = [t_ops.ASSIGN, BINARY, '$assign', '$override', '$replace']; // will delete undefined entries\nconst OP_APPLY = [t_ops.APPLY, BINARY, '$apply', '$eval']; // to be used in collection, e.g. |>$apply\n\nconst OP_SANITIZE = [t_ops.SANITIZE, BINARY, '$sanitize'];\n\n//String manipulate\nconst OP_SPLIT = [t_ops.SPLIT, BINARY, '$split', '$explode'];\nconst OP_INTERPOLATE = [t_ops.INTERPOLATE, BINARY, '$interpolate', '$template'];\n\n// [ <op name>, <unary> ]\n//embeded validators in processing pipeline\nconst matchOptions = { throwError: false, abortEarly: true, asPredicate: true };\n\nconfig.addTransformerToMap(OP_MATCH, (left, right, context) =>\n    test(left, v_ops.MATCH, right, matchOptions, { ...context, jsonx: transform })\n);\n\nconfig.addTransformerToMap(OP_SIZE, (left) => _size(left));\n\nconfig.addTransformerToMap(OP_SUM, (left) =>\n    _reduce(\n        left,\n        (sum, item) => {\n            sum += item;\n            return sum;\n        },\n        0\n    )\n);\n\nconfig.addTransformerToMap(OP_GET_TYPE, (left) =>\n    Array.isArray(left) ? 'array' : Number.isInteger(left) ? 'integer' : typeof left\n);\n\nconfig.addTransformerToMap(OP_GET_BY_INDEX, (left, right) => _nth(left, right));\nconfig.addTransformerToMap(OP_GET_BY_KEY, (left, right) => _get(left, right));\n\nconfig.addTransformerToMap(OP_FIND_INDEX, (left, right, context) => {\n    let jvs;\n    let fromIndex = 0;\n\n    if (Array.isArray(right)) {\n        if (!Array.isArray(left)) {\n            throw new Error(MSG.INVALID_OP_EXPR(t_ops.FIND_INDEX));\n        }\n\n        if (right.length !== 2) {\n            throw new Error(MSG.OPERAND_NOT_TUPLE(t_ops.FIND_INDEX));\n        }\n\n        jvs = right[0];\n        fromIndex = right[1];\n    } else {\n        jvs = right;\n    }\n\n    const predicate = (value, key) =>\n        validate(value, jvs, matchOptions, getChildContext(context, left, key, value, { jsonx: transform }));\n\n    return Array.isArray(left) ? _findIndex(left, predicate, fromIndex) : _findKey(left, predicate);\n});\n\nconfig.addTransformerToMap(OP_FIND, (left, right, context) => {\n    let jvs;\n    let fromIndex = 0;\n\n    if (Array.isArray(right)) {\n        if (right.length !== 2) {\n            throw new Error(MSG.OPERAND_NOT_TUPLE(t_ops.FIND_INDEX));\n        }\n\n        jvs = right[0];\n        fromIndex = right[1];\n    } else {\n        jvs = right;\n    }\n\n    const predicate = (value, key) =>\n        validate(value, jvs, matchOptions, getChildContext(context, left, key, value, { jsonx: transform }));\n\n    return _find(left, predicate, fromIndex);\n});\n\nconfig.addTransformerToMap(OP_IF, (left, right, context) => {\n    if (!Array.isArray(right)) {\n        throw new Error(MSG.OPERAND_NOT_ARRAY(t_ops.IF));\n    }\n\n    if (right.length < 2 || right.length > 3) {\n        throw new Error(MSG.OPERAND_NOT_TUPLE_2_OR_3(t_ops.IF));\n    }\n\n    const condition = transform(left, right[0], context);\n\n    if (condition) {\n        return transform(left, right[1], context);\n    } else if (right.length > 2) {\n        return transform(left, right[2], context);\n    }\n\n    return left;\n});\n\nconfig.addTransformerToMap(OP_CAST_ARRAY, (left) => (left == null ? null : Array.isArray(left) ? left : [left]));\n\nconfig.addTransformerToMap(OP_ADD, (left, right) => left + right);\nconfig.addTransformerToMap(OP_SUB, (left, right) => left - right);\nconfig.addTransformerToMap(OP_MUL, (left, right) => left * right);\nconfig.addTransformerToMap(OP_DIV, (left, right) => left / right);\nconfig.addTransformerToMap(OP_MOD, (left, right) => left % right);\n\nconfig.addTransformerToMap(OP_KEYS, (left) => _keys(left));\nconfig.addTransformerToMap(OP_VALUES, (left) => _values(left));\nconfig.addTransformerToMap(OP_ENTRIES, (left) => _map(left, (value, key) => [key, value]));\nconfig.addTransformerToMap(OP_OBJ_TO_ARRAY, (left, right) => {\n    if (right == null) {\n        return objectToArray(left);\n    }\n\n    return _map(left, (v, k) => transform(v, right, getChildContext(context, left, k, v), true));\n});\nconfig.addTransformerToMap(OP_FILTER_NULL, (left) => filterNull(left));\n\nconfig.addTransformerToMap(OP_PICK, (left, right, context) => {\n    if (left == null) {\n        return null;\n    }\n\n    if (typeof right !== 'object') {\n        right = [right];\n    }\n\n    if (Array.isArray(right)) {\n        return _pick(left, right);\n    }\n\n    return _pickBy(left, (item, key) =>\n        test(key, v_ops.MATCH, right, matchOptions, getChildContext(context, left, key, item, { jsonx: transform }))\n    );\n});\n\nconfig.addTransformerToMap(OP_OMIT, (left, right, context) => {\n    if (left == null) {\n        return null;\n    }\n\n    if (typeof right !== 'object') {\n        right = [right];\n    }\n\n    if (Array.isArray(right)) {\n        return _omit(left, right);\n    }\n\n    return _omitBy(left, (item, key) =>\n        test(key, v_ops.MATCH, right, matchOptions, getChildContext(context, left, key, item, { jsonx: transform }))\n    );\n});\n\nconfig.addTransformerToMap(OP_SLICE, (left, right) => {\n    if (left == null) {\n        return null;\n    }\n\n    if (!Array.isArray(left)) {\n        return new Error(MSG.VALUE_NOT_ARRAY(t_ops.SLICE));\n    }\n\n    if (Number.isInteger(right)) {\n        return left.slice(right);\n    }\n\n    if (Array.isArray(right)) {\n        if (right.length === 0 || right.length > 2) {\n            return new Error(MSG.INVALID_OP_EXPR(t_ops.SLICE, right, ['integer', '[integer]']));\n        }\n\n        return left.slice(...right);\n    }\n\n    return new Error(MSG.INVALID_OP_EXPR(t_ops.SLICE, right));\n});\n\nconfig.addTransformerToMap(OP_GROUP, (left, right) => _groupBy(left, right));\nconfig.addTransformerToMap(OP_SORT, (left, right) => _sortBy(left, right));\nconfig.addTransformerToMap(OP_REVERSE, (left) => _reverse(left));\n\nconfig.addTransformerToMap(OP_JOIN, (left, right) => {\n    if (left == null) {\n        return null;\n    }\n    if (!Array.isArray(left)) {\n        throw new Error(MSG.VALUE_NOT_ARRAY(t_ops.JOIN));\n    }\n\n    return left.join(right.toString());\n});\n\nconst objectMerger = (left, context) => [(result, expr) => Object.assign(result, transform(left, expr, context)), {}];\n\nconst arrayMerger = (left, context) => [(result, expr) => [...result, ...transform(left, expr, context)], []];\n\nconfig.addTransformerToMap(OP_MERGE, (left, right, context) => {\n    if (!Array.isArray(right)) {\n        throw new Error(MSG.OPERAND_NOT_ARRAY(t_ops.MERGE));\n    }\n\n    return right.reduce(...(Array.isArray(left) ? arrayMerger(left, context) : objectMerger(left, context)));\n});\n\nconfig.addTransformerToMap(OP_FILTER, (left, right, context) => {\n    if (left == null) {\n        return null;\n    }\n\n    if (typeof left !== 'object') {\n        throw new Error(MSG.VALUE_NOT_COLLECTION(t_ops.FILTER));\n    }\n\n    return _filter(left, (value, key) =>\n        test(value, v_ops.MATCH, right, matchOptions, getChildContext(context, left, key, value, { jsonx: transform }))\n    );\n});\nconfig.addTransformerToMap(OP_REMAP, (left, right) => {\n    if (left == null) {\n        return null;\n    }\n\n    if (typeof left !== 'object') {\n        throw new Error(MSG.VALUE_NOT_COLLECTION(t_ops.REMAP));\n    }\n\n    if (Array.isArray(right)) {\n        if (right.length !== 2) {\n            throw new Error(MSG.OPERAND_NOT_TUPLE(t_ops.REMAP));\n        }\n\n        if (!isPlainObject(right[0]) || (right[1] != null && typeof right[1] !== 'boolean')) {\n            throw new Error(MSG.INVALID_OP_EXPR(t_ops.REMAP, right, ['object', 'boolean']));\n        }\n\n        return remap(left, right[0], right[1]);\n    }\n\n    if (!isPlainObject(right)) {\n        throw new Error(MSG.OPERAND_NOT_OBJECT(t_ops.REMAP));\n    }\n\n    return remap(left, right);\n});\n\nconfig.addTransformerToMap(OP_TO_JSON, (left) => (left == null ? left : JSON.stringify(left)));\nconfig.addTransformerToMap(OP_TO_OBJ, (left) => (left == null ? left : JSON.parse(left)));\n\nconfig.addTransformerToMap(OP_SET, (left, right, context) => transform(undefined, right, context, true));\nconfig.addTransformerToMap(OP_ADD_ITEM, (left, right, context) => {\n    if (typeof left !== 'object') {\n        throw new Error(MSG.VALUE_NOT_COLLECTION(t_ops.ADD_ITEM));\n    }\n\n    if (Array.isArray(left)) {\n        return left.concat(transform(left, right, context));\n    }\n\n    if (!Array.isArray(right) || right.length !== 2) {\n        throw new Error(MSG.OPERAND_NOT_TUPLE(t_ops.ADD_ITEM));\n    }\n\n    if (typeof right[0] !== 'string') {\n        throw new Error(MSG.INVALID_OP_EXPR(t_ops.ADD_ITEM, right, ['string', 'any']));\n    }\n\n    return {\n        ...left,\n        [right[0]]: transform(left, right[1], context),\n    };\n});\nconfig.addTransformerToMap(OP_ASSIGN, (left, right, context) => {\n    if (!isPlainObject(left)) {\n        if (left == null) {\n            left = {};\n        } else {\n            throw new Error(MSG.VALUE_NOT_OBJECT(t_ops.ASSIGN));\n        }\n    }\n\n    if (!isPlainObject(right)) {\n        throw new Error(MSG.OPERAND_NOT_OBJECT(t_ops.ASSIGN));\n    }\n\n    const rightValue = _mapValues(right, (expr, key) =>\n        transform(\n            left[key],\n            typeof expr === 'string' && expr.startsWith('$') ? expr : typeof expr === 'object' ? expr : { $set: expr },\n            getChildContext(context, left, key, left[key])\n        )\n    );\n\n    const toRemove = [];\n    _each(rightValue, (value, key) => {\n        if (value === undefined) {\n            toRemove.push(key);\n        }\n    });\n\n    const merged = { ...left, ...rightValue };\n\n    return toRemove.length > 0 ? _omit(merged, toRemove) : merged;\n});\n\nconfig.addTransformerToMap(OP_APPLY, transform);\n\nconfig.addTransformerToMap(OP_SANITIZE, (left, right, context) => {\n    return Types.sanitize(left, transform(undefined, right, context, true));\n});\n\nconfig.addTransformerToMap(OP_SPLIT, (left, right) => {\n    if (typeof left !== 'string') {\n        throw new Error(MSG.VALUE_NOT_STRING(t_ops.SPLIT));\n    }\n\n    if (Array.isArray(right)) {\n        if (right.length !== 2) {\n            throw new Error(MSG.OPERAND_NOT_TUPLE(t_ops.SPLIT));\n        }\n\n        const [separator, limit] = right;\n\n        if (typeof separator !== 'string' || (limit != null && typeof limit !== 'number')) {\n            throw new Error(MSG.INVALID_OP_EXPR(t_ops.SPLIT, right, ['string', 'number']));\n        }\n\n        return left.split(separator, limit);\n    } else if (typeof right !== 'string') {\n        throw new Error(MSG.OPERAND_NOT_STRING(t_ops.SPLIT));\n    }\n\n    return left.split(right);\n});\n\nconst esTemplateSetting = {\n    interpolate: /\\$\\{([\\s\\S]+?)\\}/g,\n};\n\nconfig.addTransformerToMap(OP_INTERPOLATE, (left, right) => {\n    if (typeof left !== 'string') {\n        throw new Error(MSG.VALUE_NOT_STRING(t_ops.INTERPOLATE));\n    }\n\n    if (right != null && typeof right !== 'object') {\n        throw new Error(MSG.OPERAND_NOT_OBJECT(t_ops.INTERPOLATE));\n    }\n\n    if (Array.isArray(right)) {\n        if (right.length !== 2) {\n            throw new Error(MSG.OPERAND_NOT_TUPLE(t_ops.INTERPOLATE));\n        }\n\n        return template(left, right[0], right[1] === 'es6' ? esTemplateSetting : right[1]);\n    }\n\n    return template(left, right);\n});\n\nexport default transform;\n"],"names":["MSG","config","messages","UNARY","BINARY","OP_MATCH","t_ops","MATCH","OP_SIZE","SIZE","OP_SUM","SUM","OP_GET_TYPE","GET_TYPE","OP_GET_BY_INDEX","GET_BY_INDEX","OP_GET_BY_KEY","GET_BY_KEY","OP_FIND_INDEX","FIND_INDEX","OP_FIND","FIND","OP_IF","IF","OP_CAST_ARRAY","CAST_ARRAY","OP_ADD","ADD","OP_SUB","SUB","OP_MUL","MUL","OP_DIV","DIV","OP_MOD","MOD","OP_KEYS","KEYS","OP_VALUES","VALUES","OP_ENTRIES","ENTRIES","OP_FILTER_NULL","FILTER_NULL","OP_OBJ_TO_ARRAY","OBJ_TO_ARRAY","OP_PICK","PICK","OP_OMIT","OMIT","OP_SLICE","SLICE","OP_GROUP","GROUP","OP_SORT","SORT","OP_REVERSE","REVERSE","OP_JOIN","JOIN","OP_MERGE","MERGE","OP_FILTER","FILTER","OP_REMAP","REMAP","OP_TO_JSON","TO_JSON","OP_TO_OBJ","TO_OBJ","OP_SET","SET","OP_ADD_ITEM","ADD_ITEM","OP_ASSIGN","ASSIGN","OP_APPLY","APPLY","OP_SANITIZE","SANITIZE","OP_SPLIT","SPLIT","OP_INTERPOLATE","INTERPOLATE","matchOptions","throwError","abortEarly","asPredicate","addTransformerToMap","left","right","context","test","v_ops","jsonx","transform","_size","_reduce","sum","item","Array","isArray","Number","isInteger","_nth","_get","jvs","fromIndex","Error","INVALID_OP_EXPR","length","OPERAND_NOT_TUPLE","predicate","value","key","validate","getChildContext","_findIndex","_findKey","_find","OPERAND_NOT_ARRAY","OPERAND_NOT_TUPLE_2_OR_3","condition","_keys","_values","_map","objectToArray","v","k","filterNull","_pick","_pickBy","_omit","_omitBy","VALUE_NOT_ARRAY","slice","_groupBy","_sortBy","_reverse","join","toString","objectMerger","result","expr","Object","assign","arrayMerger","reduce","VALUE_NOT_COLLECTION","_filter","isPlainObject","remap","OPERAND_NOT_OBJECT","JSON","stringify","parse","undefined","concat","VALUE_NOT_OBJECT","rightValue","_mapValues","startsWith","$set","toRemove","_each","push","merged","Types","sanitize","VALUE_NOT_STRING","separator","limit","split","OPERAND_NOT_STRING","esTemplateSetting","interpolate","template"],"mappings":"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"}