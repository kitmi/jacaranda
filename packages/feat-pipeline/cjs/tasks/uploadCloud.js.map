{"version":3,"sources":["../../src/tasks/uploadCloud.js"],"sourcesContent":["import { Types } from '@kitmi/validators/allSync';\n\nexport default async function uploadCloud(step, settings) {\n    let { file, objectKey, contentType, service, payload } = Types.OBJECT.sanitize(settings, {\n        schema: {\n            file: { type: 'text' },\n            objectKey: { type: 'text' },\n            contentType: { type: 'text' },\n            service: { type: 'text' },\n            payload: { type: 'object', optional: true },\n        },\n    });\n\n    file = step.getValue(file);\n    objectKey = step.getValue(objectKey);\n    contentType = step.getValue(contentType);\n    service = step.getService(service);\n\n    const result = await service.upload_(objectKey, file, contentType, payload);\n\n    step.syslog('info', 'Successfully uploaded.', {\n        result,\n    });\n\n    return result;\n}\n"],"names":["uploadCloud","step","settings","file","objectKey","contentType","service","payload","Types","OBJECT","sanitize","schema","type","optional","getValue","getService","result","upload_","syslog"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAEA;;;eAA8BA;;;yBAFR;AAEP,eAAeA,YAAYC,IAAI,EAAEC,QAAQ;IACpD,IAAI,EAAEC,IAAI,EAAEC,SAAS,EAAEC,WAAW,EAAEC,OAAO,EAAEC,OAAO,EAAE,GAAGC,cAAK,CAACC,MAAM,CAACC,QAAQ,CAACR,UAAU;QACrFS,QAAQ;YACJR,MAAM;gBAAES,MAAM;YAAO;YACrBR,WAAW;gBAAEQ,MAAM;YAAO;YAC1BP,aAAa;gBAAEO,MAAM;YAAO;YAC5BN,SAAS;gBAAEM,MAAM;YAAO;YACxBL,SAAS;gBAAEK,MAAM;gBAAUC,UAAU;YAAK;QAC9C;IACJ;IAEAV,OAAOF,KAAKa,QAAQ,CAACX;IACrBC,YAAYH,KAAKa,QAAQ,CAACV;IAC1BC,cAAcJ,KAAKa,QAAQ,CAACT;IAC5BC,UAAUL,KAAKc,UAAU,CAACT;IAE1B,MAAMU,SAAS,MAAMV,QAAQW,OAAO,CAACb,WAAWD,MAAME,aAAaE;IAEnEN,KAAKiB,MAAM,CAAC,QAAQ,0BAA0B;QAC1CF;IACJ;IAEA,OAAOA;AACX"}