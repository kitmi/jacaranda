{"version":3,"sources":["../../src/tasks/fill.js"],"sourcesContent":["import { Types } from '@kitmi/validators/allSync';\nimport { _, set as _set } from '@kitmi/utils';\n\nexport default function fill(step, settings) {\n    let { data, target } = Types.OBJECT.sanitize(settings, {\n        schema: {\n            data: { type: 'object' },\n            target: { type: 'text', optional: true },\n        },\n    });\n\n    const result = {};\n\n    if (target) {\n        target = step.getValue(target);\n    }\n\n    _.each(data, (value, key) => {\n        value = step.getValue(value);\n        if (target) {\n            _set(target, key, value);\n        } else {\n            step.setData(key, value);\n        }\n\n        result[key] = value;\n    });    \n\n    step.syslog('info', 'Filled output data.', {\n        result\n    });\n\n    return result;\n}\n"],"names":["fill","step","settings","data","target","Types","OBJECT","sanitize","schema","type","optional","result","getValue","_","each","value","key","_set","setData","syslog"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAGA;;;eAAwBA;;;yBAHF;uBACS;AAEhB,SAASA,KAAKC,IAAI,EAAEC,QAAQ;IACvC,IAAI,EAAEC,IAAI,EAAEC,MAAM,EAAE,GAAGC,cAAK,CAACC,MAAM,CAACC,QAAQ,CAACL,UAAU;QACnDM,QAAQ;YACJL,MAAM;gBAAEM,MAAM;YAAS;YACvBL,QAAQ;gBAAEK,MAAM;gBAAQC,UAAU;YAAK;QAC3C;IACJ;IAEA,MAAMC,SAAS,CAAC;IAEhB,IAAIP,QAAQ;QACRA,SAASH,KAAKW,QAAQ,CAACR;IAC3B;IAEAS,QAAC,CAACC,IAAI,CAACX,MAAM,CAACY,OAAOC;QACjBD,QAAQd,KAAKW,QAAQ,CAACG;QACtB,IAAIX,QAAQ;YACRa,IAAAA,UAAI,EAACb,QAAQY,KAAKD;QACtB,OAAO;YACHd,KAAKiB,OAAO,CAACF,KAAKD;QACtB;QAEAJ,MAAM,CAACK,IAAI,GAAGD;IAClB;IAEAd,KAAKkB,MAAM,CAAC,QAAQ,uBAAuB;QACvCR;IACJ;IAEA,OAAOA;AACX"}