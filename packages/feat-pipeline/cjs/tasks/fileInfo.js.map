{"version":3,"sources":["../../src/tasks/fileInfo.js"],"sourcesContent":["import { fs } from '@kitmi/sys';\nimport { Types } from '@kitmi/validators/allSync';\nimport path from 'node:path';\nimport mime from 'mime';\n\nexport default async function fileInfo(step, settings) {\n    let { file } = Types.OBJECT.sanitize(settings, {\n        schema: {\n            file: { type: 'text' }\n        },\n    });\n\n    const filePath = step.getValue(file);\n    const stat = await fs.stat(filePath);\n    const ext = path.extname(filePath);\n    const baseName = path.basename(filePath, ext);\n\n    const result = {\n        baseName,\n        extName: ext,\n        fileName: baseName + ext,\n        size: stat.size,\n        mime: mime.getType(ext),\n    };\n\n    step.syslog('info', `File info attained for \"${filePath}\".`, {\n        result,\n    });\n\n    return result;\n}\n"],"names":["fileInfo","step","settings","file","Types","OBJECT","sanitize","schema","type","filePath","getValue","stat","fs","ext","path","extname","baseName","basename","result","extName","fileName","size","mime","getType","syslog"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAKA;;;eAA8BA;;;qBALX;yBACG;iEACL;6DACA;;;;;;AAEF,eAAeA,SAASC,IAAI,EAAEC,QAAQ;IACjD,IAAI,EAAEC,IAAI,EAAE,GAAGC,cAAK,CAACC,MAAM,CAACC,QAAQ,CAACJ,UAAU;QAC3CK,QAAQ;YACJJ,MAAM;gBAAEK,MAAM;YAAO;QACzB;IACJ;IAEA,MAAMC,WAAWR,KAAKS,QAAQ,CAACP;IAC/B,MAAMQ,OAAO,MAAMC,OAAE,CAACD,IAAI,CAACF;IAC3B,MAAMI,MAAMC,iBAAI,CAACC,OAAO,CAACN;IACzB,MAAMO,WAAWF,iBAAI,CAACG,QAAQ,CAACR,UAAUI;IAEzC,MAAMK,SAAS;QACXF;QACAG,SAASN;QACTO,UAAUJ,WAAWH;QACrBQ,MAAMV,KAAKU,IAAI;QACfC,MAAMA,aAAI,CAACC,OAAO,CAACV;IACvB;IAEAZ,KAAKuB,MAAM,CAAC,QAAQ,CAAC,wBAAwB,EAAEf,SAAS,EAAE,CAAC,EAAE;QACzDS;IACJ;IAEA,OAAOA;AACX"}