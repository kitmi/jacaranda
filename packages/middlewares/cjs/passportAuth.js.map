{"version":3,"sources":["../src/passportAuth.js"],"sourcesContent":["/**\n * Passport initialization middleware, required to initialize Passport service.\n * @module Middleware_PassportAuth\n */\n\nconst middlewareName = 'passportAuth';\n\n/**\n * Create a passport authentication middleware.\n * @param {object} opt - Passport options\n * @property {string} opt.strategy - Passport strategy\n * @property {object} [opt.options] - Passport strategy options\n * @param {Routable} app\n * @returns {KoaActionFunction}\n */\nconst passportAuth = (opt, app) => {\n    const { strategy, options } = app.middlewareConfig(\n        opt,\n        {\n            schema: {\n                strategy: { type: 'text' },\n                options: { type: 'object', optional: true },\n            },\n        },\n        middlewareName\n    );\n\n    app.requireServices(['passport']);\n\n    const passportService = app.getService('passport');\n\n    return passportService.authenticate(strategy, options);\n};\n\nexport default passportAuth;\n"],"names":["middlewareName","passportAuth","opt","app","strategy","options","middlewareConfig","schema","type","optional","requireServices","passportService","getService","authenticate"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":"AAAA;;;CAGC;;;;+BA+BD;;;eAAA;;;AA7BA,MAAMA,iBAAiB;AAEvB;;;;;;;CAOC,GACD,MAAMC,eAAe,CAACC,KAAKC;IACvB,MAAM,EAAEC,QAAQ,EAAEC,OAAO,EAAE,GAAGF,IAAIG,gBAAgB,CAC9CJ,KACA;QACIK,QAAQ;YACJH,UAAU;gBAAEI,MAAM;YAAO;YACzBH,SAAS;gBAAEG,MAAM;gBAAUC,UAAU;YAAK;QAC9C;IACJ,GACAT;IAGJG,IAAIO,eAAe,CAAC;QAAC;KAAW;IAEhC,MAAMC,kBAAkBR,IAAIS,UAAU,CAAC;IAEvC,OAAOD,gBAAgBE,YAAY,CAACT,UAAUC;AAClD;MAEA,WAAeJ"}